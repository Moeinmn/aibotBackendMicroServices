generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

model users {
  user_id      String   @id @default(uuid())
  name         String   @db.VarChar(255)
  lastName     String?  @db.VarChar(255)
  email        String?  @unique @db.VarChar(255)
  passwordHash String   @db.VarChar(255)
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  bots         bots[]
}

model bots {
  bot_id           String      @id @default(uuid())
  name             String      @db.VarChar(255)
  created_at       DateTime    @default(now())
  updated_at       DateTime    @updatedAt
  type             String
  user_id          String
  general_configs  Json        @default("{\"has_memory\": false}")
  model_configs    Json        @default("{\"model_name\": \"GPT-3.5Turbo\", \"Temperature\": 0.5}")
  ui_configs     Json     @default("{\"greet_msgs\":[\"سلام ! امروز چطور می‌توانم به شما کمک کنم؟\"],\"action_btns\":[\"چگونه میتونم بات بسازم؟\"],\"placeholder_msg\":\"چگونه میتونم بات بسازم؟\",\"input_types\": [],\"ask_credentials\": {},\"footer_msg\":\"raya.chat\",\"display_name\":\"raya chat\",\"user_msg_color\":\"#ffff\",\"bot_image\":\"https://test.png\",\"bot_btn_color\":\"#FFF\",\"bot_position\":\"left\",\"init_msg_delay\":\"20\"}")   
  security_configs Json        @default("{\"access_bot\":\"private\",\"status_bot\":\"enable\",\"rate_limit_msg\":\"20\",\"rate_limit_time\":\"240\",\"rate_limit_msg_show\":\"تعداد درخواست شما زیاد تر از استاندارد بات می باشد.\"}")
  evals            Json        @default("{}")
  status           String      @default("active")
  token_limit      Int         @default(8000000)
  token_limit_pp   Int         @default(8000)
  datasource       datasources[]
  user             users       @relation(fields: [user_id], references: [user_id])
}

model datasources {
  datasource_id  String @id @default(uuid())
  bot_id         String 
  static_files   Json   @default("{}")
  urls           String @db.VarChar(255)
  text_input     String @db.VarChar(255)
  qANDa_input    String @db.VarChar(255)
  knowledge_base Json   @default("{}")
  total_char     String @db.VarChar(255)
  bot            bots   @relation(fields: [bot_id], references: [bot_id])
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.

model langchain_pg_embedding {
  collection_id           String?                  @db.Uuid
  embedding               Unsupported("vector")?
  document                String?                  @db.VarChar
  cmetadata               Json?                    @db.Json
  custom_id               String?                  @db.VarChar
  uuid                    String                   @id @db.Uuid
  langchain_pg_collection langchain_pg_collection? @relation(fields: [collection_id], references: [uuid], onDelete: Cascade, onUpdate: NoAction)

  @@ignore
}

model langchain_pg_collection {
  name                   String?                  @db.VarChar
  cmetadata              Json?                    @db.Json
  uuid                   String                   @id @db.Uuid
  langchain_pg_embedding langchain_pg_embedding[]

  @@ignore
}
