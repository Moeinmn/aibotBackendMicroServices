generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

model users {
  user_id      String   @id @default(uuid())
  name         String   @db.VarChar(255)
  lastName     String?  @db.VarChar(255)
  email        String?  @unique @db.VarChar(255)
  passwordHash String   @db.VarChar(255)
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  bots         bots[]
}

model bots {
  bot_id         String   @id @default(uuid())
  name           String   @db.VarChar(255)
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
  type           String
  user_id        String
  general_configs      Json     @default("{\"has_memory\": false, \"action_btns\": [], \"input_types\": [], \"greet_messages\": [], \"ask_credentials\": {}}")
  model_configs  Json     @default("{\"neme_model\": \"GPT-3.5Turbo\", \"Temperature\": 0.5}")
  ui_configs     Json     @default("{\"start_msg\":[\"سلام ! امروز چطور می‌توانم به شما کمک کنم؟\"],\"suggestion_msg\":[\"چگونه میتونم بات بسازم؟\"],\"placeholder_msg\":\"چگونه میتونم بات بسازم؟\",\"footer_msg\":\"raya.chat\",\"display_name\":\"raya chat\",\"color_msg_user\":\"#ffff\",\"image_bot\":\"https://test.png\",\"color_btn_bot\":\"#FFF\",\"position_bot\":\"left\",\"time_delay_initmsg\":\"20\"}")   
  security_configs Json   @default("{\"access_bot\":\"private\",\"status_bot\":\"enable\",\"rate_limit_msg\":\"20\",\"rate_limit_time\":\"240\",\"rate_limit_msg_show\":\"تعداد درخواست شما زیاد تر از استاندارد بات می باشد.\"}") 
  evals          Json     @default("{}")
  status         String   @default("active")
  token_limit    Int      @default(8000000)
  token_limit_pp Int      @default(8000)
  datasource     datasources
  user           users    @relation(fields: [user_id], references: [user_id])
}

model datasources {
  datasource_id  String @id @default(uuid())
  bot_id         String   @db.VarChar(255)
  static_files   Json   @default("{}")
  urls           String @db.VarChar(255)
  text_input     String @db.VarChar(255)
  qANDa_input     String @db.VarChar(255)
  knowledge_base Json   @default("{}")
  total_char     String @db.VarChar(255)
  bot            bots   @relation(fields: [bot_id], references: [bot_id])
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.

model langchain_pg_embedding {
  collection_id           String?                  @db.Uuid
  embedding               Unsupported("vector")?
  document                String?                  @db.VarChar
  cmetadata               Json?                    @db.Json
  custom_id               String?                  @db.VarChar
  uuid                    String                   @id @db.Uuid
  langchain_pg_collection langchain_pg_collection? @relation(fields: [collection_id], references: [uuid], onDelete: Cascade, onUpdate: NoAction)

  @@ignore
}

model langchain_pg_collection {
  name                   String?                  @db.VarChar
  cmetadata              Json?                    @db.Json
  uuid                   String                   @id @db.Uuid
  langchain_pg_embedding langchain_pg_embedding[]

  @@ignore
}